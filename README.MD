### Author

Trabalho Realizado por Gon√ßalo Rui Alves Faria. 97031


## Dependencies.
* AWS java sdk 1.11
* JAVA 7 

## Setting up

#### Virtual machine Configuration
* Create a AWS Instance with a security group with available ports 80, 8000, 8088. Intall java 7 and aws sdk 1.11.

(after sending the sources)

* Give execution permissions to the shell scripts by doing: ` $ chmod 755 *.sh `

* Go to the file dep.config and change the value of $AWS_DIR and $REGION to the location of the AWS java sdk.

* Compile the code using:
` $ ./compile.sh `. 

In this file, we can configure which types of metrics will be collected and if we want to collect also the overhead generated by this metric collection.

The java execution of the ICount program can have either 4 arguments or 1.

The 4 arguments case takes the form: 

` $ java ICount --indir --outdir --instruments/basicblocks --methods --branchestaken --incrementsperformed `
(each one can take the value 1 for collecting the specific metric or 0 for not collecting)

The 1 argument case can either be true or false. (true for collecting overhead false for not).
` $ java ICount --indir --outdir --overhead `

* An image can now be created for future use using the AWS S2 dashboard. (do not load the security credentials in the instance ~/.aws) 

* After creating the snapshot, fill in your AWS access credentials in the provided credentials file template, and be sure to move the file to the default location (~/.aws/credentials).

https://console.aws.amazon.com/iam/home?#security_credential

* Fill in the remaining variable in the dep.config file, mainly $AMI, $KEYNAME, $SECURITYGROUPS, $INSTANCETYPE, for the webserver instance, noting that the security groups should still have 80, 8000, 8088 ports available.

* Run the script ` $ ./balancer.sh `.

#### Data

The data from the experiments is in data/dataplot.ipynb.(Jupyter notebook) The experiments were performed in the Aws instances and stored using the LocalStorage class. Using the LocalStorageReader program the metrics were transformed into an appropriate format for plotting with python.

#### Notes

Ideally would split the code into two self contained pieces, one for the web server other for the web balancer. 
The source code already allows this, we just need to do the scripts that actually do this in a nice way. (will be left for the next checkpoint)
